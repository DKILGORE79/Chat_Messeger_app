{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Chat from'./Chat';import ChatInput from'./ChatInput';import axios from'axios';import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatDisplay=function ChatDisplay(_ref){var user=_ref.user,clickedUser=_ref.clickedUser;var userId=user===null||user===void 0?void 0:user.user_id;var clickedUserId=clickedUser===null||clickedUser===void 0?void 0:clickedUser.user_id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),usersMessages=_useState2[0],setUsersMessages=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),clickedUsersMessages=_useState4[0],setClickedUsersMessages=_useState4[1];var getUsersMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('http://localhost:8000/messages',{params:{userId:userId,correspondingUserId:clickedUserId}});case 3:response=_context.sent;setUsersMessages(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getUsersMessages(){return _ref2.apply(this,arguments);};}();var getClickedUsersMessages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('http://localhost:8000/messages',{params:{userId:clickedUserId,correspondingUserId:userId}});case 3:response=_context2.sent;setClickedUsersMessages(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getClickedUsersMessages(){return _ref3.apply(this,arguments);};}();useEffect(function(){getUsersMessages();getClickedUsersMessages();},[]);var messages=[];usersMessages===null||usersMessages===void 0?void 0:usersMessages.forEach(function(message){var formattedMessage={};formattedMessage['name']=user===null||user===void 0?void 0:user.first_name;formattedMessage['img']=user===null||user===void 0?void 0:user.url;formattedMessage['message']=message.message;formattedMessage['timestamp']=message.timestamp;messages.push(formattedMessage);});clickedUsersMessages===null||clickedUsersMessages===void 0?void 0:clickedUsersMessages.forEach(function(message){var formattedMessage={};formattedMessage['name']=clickedUser===null||clickedUser===void 0?void 0:clickedUser.first_name;formattedMessage['img']=clickedUser===null||clickedUser===void 0?void 0:clickedUser.url;formattedMessage['message']=message.message;formattedMessage['timestamp']=message.timestamp;messages.push(formattedMessage);});var descendingOrderMessages=messages===null||messages===void 0?void 0:messages.sort(function(a,b){return a.timestamp.localeCompare(b.timestamp);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Chat,{descendingOrderMessages:descendingOrderMessages}),/*#__PURE__*/_jsx(ChatInput,{user:user,clickedUser:clickedUser,getUserMessages:getUsersMessages,getClickedUsersMessages:getClickedUsersMessages})]});};export default ChatDisplay;","map":{"version":3,"names":["Chat","ChatInput","axios","useState","useEffect","ChatDisplay","user","clickedUser","userId","user_id","clickedUserId","usersMessages","setUsersMessages","clickedUsersMessages","setClickedUsersMessages","getUsersMessages","get","params","correspondingUserId","response","data","console","log","getClickedUsersMessages","messages","forEach","message","formattedMessage","first_name","url","timestamp","push","descendingOrderMessages","sort","a","b","localeCompare"],"sources":["C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/src/components/ChatDisplay.js"],"sourcesContent":["import Chat from './Chat'\nimport ChatInput from './ChatInput'\nimport axios from 'axios'\nimport {useState, useEffect} from \"react\"\n\n\nconst ChatDisplay = ({ user , clickedUser }) => {\n    const userId = user?.user_id\n    const clickedUserId = clickedUser?.user_id\n    const [usersMessages, setUsersMessages] = useState(null)\n    const [clickedUsersMessages, setClickedUsersMessages] = useState(null)\n\n    const getUsersMessages = async () => {\n     try {\n            const response = await axios.get('http://localhost:8000/messages', {\n                params: { userId: userId, correspondingUserId: clickedUserId}\n            })\n         setUsersMessages(response.data)\n        } catch (error) {\n         console.log(error)\n     }\n    }\n\n    const getClickedUsersMessages = async () => {\n        try {\n            const response = await axios.get('http://localhost:8000/messages', {\n                params: { userId: clickedUserId , correspondingUserId: userId}\n            })\n            setClickedUsersMessages(response.data)\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    useEffect(() => {\n        getUsersMessages()\n        getClickedUsersMessages()\n    }, [])\n\n    const messages = []\n\n    usersMessages?.forEach(message => {\n        const formattedMessage = {}\n        formattedMessage['name'] = user?.first_name\n        formattedMessage['img'] = user?.url\n        formattedMessage['message'] = message.message\n        formattedMessage['timestamp'] = message.timestamp\n        messages.push(formattedMessage)\n    })\n\n    clickedUsersMessages?.forEach(message => {\n        const formattedMessage = {}\n        formattedMessage['name'] = clickedUser?.first_name\n        formattedMessage['img'] = clickedUser?.url\n        formattedMessage['message'] = message.message\n        formattedMessage['timestamp'] = message.timestamp\n        messages.push(formattedMessage)\n    })\n\n    const descendingOrderMessages = messages?.sort((a,b) => a.timestamp.localeCompare(b.timestamp))\n\n    return (\n        <>\n        <Chat descendingOrderMessages={descendingOrderMessages}/>\n     <ChatInput\n         user={user}\n         clickedUser={clickedUser} getUserMessages={getUsersMessages} getClickedUsersMessages={getClickedUsersMessages}/>\n        </>\n    )\n}\n\nexport default ChatDisplay"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}