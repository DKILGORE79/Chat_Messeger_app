{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MatchesDisplay=function MatchesDisplay(_ref){var matches=_ref.matches,setClickedUser=_ref.setClickedUser;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),matchedProfiles=_useState2[0],setMatchedProfiles=_useState2[1];var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var matchedUserIds=matches.map(function(_ref2){var user_id=_ref2.user_id;return user_id;});var userId=cookies.UserId;var getMatches=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8000/users\",{params:{userIds:JSON.stringify(matchedUserIds)}});case 3:response=_context.sent;setMatchedProfiles(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getMatches(){return _ref3.apply(this,arguments);};}();useEffect(function(){getMatches();},[matches]);var filteredMatchedProfiles=matchedProfiles===null||matchedProfiles===void 0?void 0:matchedProfiles.filter(function(matchedProfile){return matchedProfile.matches.filter(function(profile){return profile.user_id==userId;}).length>0;});return/*#__PURE__*/_jsx(\"div\",{className:\"matches-display\",children:filteredMatchedProfiles===null||filteredMatchedProfiles===void 0?void 0:filteredMatchedProfiles.map(function(match,_index){return/*#__PURE__*/_jsxs(\"div\",{className:\"match-card\",onClick:function onClick(){return setClickedUser(match);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:match===null||match===void 0?void 0:match.url,alt:(match===null||match===void 0?void 0:match.first_name)+\" profile\"})}),/*#__PURE__*/_jsx(\"h3\",{children:match===null||match===void 0?void 0:match.first_name})]},_index);})});};export default MatchesDisplay;","map":{"version":3,"names":["axios","useEffect","useState","useCookies","MatchesDisplay","matches","setClickedUser","matchedProfiles","setMatchedProfiles","cookies","setCookie","removeCookie","matchedUserIds","map","user_id","userId","UserId","getMatches","get","params","userIds","JSON","stringify","response","data","console","log","filteredMatchedProfiles","filter","matchedProfile","profile","length","match","_index","url","first_name"],"sources":["C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/src/components/MatchesDisplay.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\n\nconst MatchesDisplay = ({ matches, setClickedUser }) => {\n  const [matchedProfiles, setMatchedProfiles] = useState(null);\n  const [cookies, setCookie, removeCookie] = useCookies(null);\n\n  const matchedUserIds = matches.map(({ user_id }) => user_id);\n  const userId = cookies.UserId;\n\n  const getMatches = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8000/users\", {\n        params: { userIds: JSON.stringify(matchedUserIds) },\n      });\n      setMatchedProfiles(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getMatches();\n  }, [matches]);\n\n  const filteredMatchedProfiles = matchedProfiles?.filter(\n    (matchedProfile) =>\n      matchedProfile.matches.filter((profile) => profile.user_id == userId)\n        .length > 0\n  );\n\n  return (\n    <div className=\"matches-display\">\n      {filteredMatchedProfiles?.map((match, _index) => (\n        <div\n          key={_index}\n          className=\"match-card\"\n          onClick={() => setClickedUser(match)}\n        >\n          <div className=\"img-container\">\n            <img src={match?.url} alt={match?.first_name + \" profile\"} />\n          </div>\n          <h3>{match?.first_name}</h3>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default MatchesDisplay;\n"],"mappings":"ohBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,UAAU,KAAQ,cAAc,CAAC,wFAE1C,GAAMC,eAAc,CAAG,QAAjBA,eAAc,MAAoC,IAA9BC,QAAO,MAAPA,OAAO,CAAEC,cAAc,MAAdA,cAAc,CAC/C,cAA8CJ,QAAQ,CAAC,IAAI,CAAC,wCAArDK,eAAe,eAAEC,kBAAkB,eAC1C,gBAA2CL,UAAU,CAAC,IAAI,CAAC,4CAApDM,OAAO,iBAAEC,SAAS,iBAAEC,YAAY,iBAEvC,GAAMC,eAAc,CAAGP,OAAO,CAACQ,GAAG,CAAC,mBAAGC,QAAO,OAAPA,OAAO,OAAOA,QAAO,GAAC,CAC5D,GAAMC,OAAM,CAAGN,OAAO,CAACO,MAAM,CAE7B,GAAMC,WAAU,6FAAG,wLAEQjB,MAAK,CAACkB,GAAG,CAAC,6BAA6B,CAAE,CAC9DC,MAAM,CAAE,CAAEC,OAAO,CAAEC,IAAI,CAACC,SAAS,CAACV,cAAc,CAAE,CACpD,CAAC,CAAC,QAFIW,QAAQ,eAGdf,kBAAkB,CAACe,QAAQ,CAACC,IAAI,CAAC,CAAC,+EAElCC,OAAO,CAACC,GAAG,aAAO,CAAC,oEAEtB,kBATKT,WAAU,2CASf,CAEDhB,SAAS,CAAC,UAAM,CACdgB,UAAU,EAAE,CACd,CAAC,CAAE,CAACZ,OAAO,CAAC,CAAC,CAEb,GAAMsB,wBAAuB,CAAGpB,eAAe,SAAfA,eAAe,iBAAfA,eAAe,CAAEqB,MAAM,CACrD,SAACC,cAAc,QACbA,eAAc,CAACxB,OAAO,CAACuB,MAAM,CAAC,SAACE,OAAO,QAAKA,QAAO,CAAChB,OAAO,EAAIC,MAAM,GAAC,CAClEgB,MAAM,CAAG,CAAC,GAChB,CAED,mBACE,YAAK,SAAS,CAAC,iBAAiB,UAC7BJ,uBAAuB,SAAvBA,uBAAuB,iBAAvBA,uBAAuB,CAAEd,GAAG,CAAC,SAACmB,KAAK,CAAEC,MAAM,qBAC1C,aAEE,SAAS,CAAC,YAAY,CACtB,OAAO,CAAE,yBAAM3B,eAAc,CAAC0B,KAAK,CAAC,EAAC,wBAErC,YAAK,SAAS,CAAC,eAAe,uBAC5B,YAAK,GAAG,CAAEA,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEE,GAAI,CAAC,GAAG,CAAE,CAAAF,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEG,UAAU,EAAG,UAAW,EAAG,EACzD,cACN,oBAAKH,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEG,UAAU,EAAM,GAPvBF,MAAM,CAQP,EACP,CAAC,EACE,CAEV,CAAC,CAED,cAAe7B,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}