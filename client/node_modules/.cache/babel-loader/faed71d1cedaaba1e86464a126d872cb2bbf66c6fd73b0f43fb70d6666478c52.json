{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthModal=function AuthModal(_ref){var setShowModal=_ref.setShowModal,isSignUp=_ref.isSignUp;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var navigate=useNavigate();console.log(email,password,confirmPassword);var handleClick=function handleClick(){setShowModal(false);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,success;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!(isSignUp&&password!==confirmPassword)){_context.next=5;break;}setError('Passwords need to match!');return _context.abrupt(\"return\");case 5:_context.next=7;return axios.post(\"http://localhost:8000/\".concat(isSignUp?'signup':'login'),{email:email,password:password});case 7:response=_context.sent;setCookie('AuthToken',response.data.token);setCookie('UserId',response.data.userId);success=response.status===201;if(success&&isSignUp)navigate('/onboarding');if(success&&!isSignUp)navigate('/dashboard');window.location.reload();_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleClick,children:\"\\u24E7\"}),/*#__PURE__*/_jsx(\"h2\",{children:isSignUp?'CREATE ACCOUNT':'LOG IN'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"email\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"password\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),isSignUp&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password-check\",name:\"password-check\",placeholder:\"confirm password\",required:true,onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"secondary-button\",type:\"submit\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"GET THE APP\"})]});};export default AuthModal;","map":{"version":3,"names":["useState","axios","useNavigate","useCookies","AuthModal","setShowModal","isSignUp","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","error","setError","cookies","setCookie","removeCookie","navigate","console","log","handleClick","handleSubmit","e","preventDefault","post","response","data","token","userId","success","status","window","location","reload","target","value"],"sources":["C:/Users/derek/Desktop/Bootcamp/KU-VIRT-FSF-PT-05-2022-U-LOLC/Chat_Messeger_app/client/src/components/AuthModal.js"],"sourcesContent":["import { useState } from 'react'\nimport axios from 'axios'\nimport { useNavigate } from 'react-router-dom'\nimport { useCookies } from 'react-cookie'\n\n\nconst AuthModal = ({ setShowModal,  isSignUp }) => {\n    const [email, setEmail] = useState(null)\n    const [password, setPassword] = useState(null)\n    const [confirmPassword, setConfirmPassword] = useState(null)\n    const [error, setError] = useState(null)\n    const [ cookies, setCookie, removeCookie] = useCookies(null)\n\n    let navigate = useNavigate()\n\n    console.log(email, password, confirmPassword)\n\n\n    const handleClick = () => {\n        setShowModal(false)\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n\n        try {\n            if (isSignUp && (password !== confirmPassword)) {\n                setError('Passwords need to match!')\n                return\n            }\n\n            const response = await axios.post(`http://localhost:8000/${isSignUp ? 'signup' : 'login'}`, { email, password })\n\n            setCookie('AuthToken', response.data.token)\n            setCookie('UserId', response.data.userId)\n\n            const success = response.status === 201\n            if (success && isSignUp) navigate ('/onboarding')\n            if (success && !isSignUp) navigate ('/dashboard')\n\n            window.location.reload()\n\n        } catch (error) {\n            console.log(error)\n        }\n\n    }\n\n    return (\n        <div className=\"auth-modal\">\n            <div className=\"close-icon\" onClick={handleClick}>â“§</div>\n\n            <h2>{isSignUp ? 'CREATE ACCOUNT': 'LOG IN'}</h2>\n  \n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    placeholder=\"email\"\n                    required={true}\n                    onChange={(e) => setEmail(e.target.value)}\n                />\n                <input\n                    type=\"password\"\n                    id=\"password\"\n                    name=\"password\"\n                    placeholder=\"password\"\n                    required={true}\n                    onChange={(e) => setPassword(e.target.value)}\n                />\n                {isSignUp && <input\n                    type=\"password\"\n                    id=\"password-check\"\n                    name=\"password-check\"\n                    placeholder=\"confirm password\"\n                    required={true}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                />}\n                <input className=\"secondary-button\" type=\"submit\"/>\n                <p>{error}</p>\n            </form>\n\n            <hr/>\n            <h2>GET THE APP</h2>\n\n        </div>\n    )\n}\nexport default AuthModal\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}